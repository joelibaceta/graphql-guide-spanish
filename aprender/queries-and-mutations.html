<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.5.0 -->
<title>Consultas y Mutaciones | GraphQL</title>
<meta name="generator" content="Jekyll v3.8.3" />
<meta property="og:title" content="Consultas y Mutaciones" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Consultas y Mutaciones" />
<meta property="og:description" content="Consultas y Mutaciones" />
<link rel="canonical" href="/graphql-guide-spanish/aprender/queries-and-mutations" />
<meta property="og:url" content="/graphql-guide-spanish/aprender/queries-and-mutations" />
<meta property="og:site_name" content="GraphQL" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2018-07-15T00:00:00+00:00" />
<script type="application/ld+json">
{"description":"Consultas y Mutaciones","datePublished":"2018-07-15T00:00:00+00:00","dateModified":"2018-07-15T00:00:00+00:00","headline":"Consultas y Mutaciones","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"/graphql-guide-spanish/aprender/queries-and-mutations"},"url":"/graphql-guide-spanish/aprender/queries-and-mutations","@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/graphql-guide-spanish/assets/main.css"><link type="application/atom+xml" rel="alternate" href="/graphql-guide-spanish/feed.xml" title="GraphQL" /></head>
<body>

    <main class="page-content" aria-label="Content"> 
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h3 class="post-title p-name" itemprop="name headline">Consultas y Mutaciones</h1>
    <p class="post-meta"></p>
  </header>

  <div class="post-content e-content" itemprop="articleBody">
    <h1 id="consultas-y-mutaciones">Consultas y Mutaciones</h1>

<p>En esta pagina. Aprenderas en detalle como consultar un servidor GraphQL.</p>

<h2 id="campos">Campos</h2>

<p>En su forma mas simple GraphQL trata sobre consultas por campos especificos. Empecemos por ver una consulta muy simple y el resultado que obtenemos.</p>

<div class="language-graphql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="n">hero</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="n">name</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>
<p>Resultado</p>
<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"hero"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"R2-D2"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p>Puedes ver inmediatamente que la consulta tiene exactamente la misma forma que el resutlado. Esto es escencial en GraphQL, por que siempre obtendras lo que esperas y el servidor sabe cuales son los campos por los que el cliente esta consultando.</p>

<p>El campo <code class="highlighter-rouge">name</code>retorna un tipo <code class="highlighter-rouge">String</code>, en este caso el nombre del heroe principal de Star Wars, “R2-D2”.</p>

<blockquote>
  <p>Oh, una cosa mas, <del>la consulta anterior es interactiva. lo que significa que puedes modificarla y ver el nuevo resultado,</del> trata de agregar el campo <code class="highlighter-rouge">appearsIn</code> al objeto <code class="highlighter-rouge">hero</code> en la consulta y mira el nuevo resultado.</p>
</blockquote>

<div class="language-graphql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="n">hero</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="n">name</span><span class="w">
    </span><span class="n">appearsIn</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>
<p>Resultado</p>
<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"hero"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"R2-D2"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"appearsIn"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="s2">"NEWHOPE"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"EMPIRE"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"JEDI"</span><span class="w">
      </span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>
<p>En el ejemplo anterior, consultamos por el nombre del heroe el cual retornaba un <code class="highlighter-rouge">String</code>, pero los campos tambien pueden refererirse a objetos. En este caso, puedes hacer una sub-seleccion de campos para este objeto. Las consultas GraphQL pueden realizarse a traves de objetos relacionados y sus campos, permitiendo que los clientes traigan mucha de la informacion relacionada en una unica consulta, en lugar de hacer multiples consultas de ida y vuelta como seria necesario en una estructura clasica REST.</p>

<div class="language-graphql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="n">hero</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="n">name</span><span class="w">
    </span><span class="c"># Queries can have comments!</span><span class="w">
    </span><span class="n">friends</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="n">name</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>
<p>Respuesta</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{
  "data": {
    "hero": {
      "name": "R2-D2",
      "friends": [
        {
          "name": "Luke Skywalker"
        },
        {
          "name": "Han Solo"
        },
        {
          "name": "Leia Organa"
        }
      ]
    }
  }
}
</code></pre></div></div>
<p>Note que en este ejemplo el campo <code class="highlighter-rouge">friends</code> retorna un arreglo de elementos. Las consultas GraphQL tienen el mismo aspecto tanto para elementos individuales o una lista de elementos. Sin embargo sabemos que resultado esperar basados en lo que indica el esquema.</p>

<h2 id="argumentos">Argumentos</h2>

<p>Si lo unico que pudiesemos hacer fuese consultar por objetos y campos, GraphQL ya seria un lenguaje muy util para obtener datos. Pero cuando le agremas la posibilidad de usar argumentos a los campos, las cosas se ponen mas interesantes.</p>

<div class="language-graphql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="n">human</span><span class="p">(</span><span class="n">id</span><span class="p">:</span><span class="w"> </span><span class="s2">"1000"</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="n">name</span><span class="w">
    </span><span class="n">height</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>
<p>Resultado</p>
<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"human"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Luke Skywalker"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"height"</span><span class="p">:</span><span class="w"> </span><span class="mf">1.72</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>
<p>En un sistema como REST, solo puedes pasar un unico conjunto de argumentos: los parametros de consulta y los segmentos de url en la solicitud, pero en GraphQL, cada campo y objeto anidado puede tener su propio conjunto de argumentos, haciendo GraphQL un reemplazo completo para consultas multiples a APIs para la obtencion de informacion, Incluso puedes pasar argumentos en campos escalares para realizar transformaciones de datos en el servidor en lugar de realizarlo en cada cliente por separado.</p>

<div class="language-graphql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="n">human</span><span class="p">(</span><span class="n">id</span><span class="p">:</span><span class="w"> </span><span class="s2">"1000"</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="n">name</span><span class="w">
    </span><span class="n">height</span><span class="p">(</span><span class="n">unit</span><span class="p">:</span><span class="w"> </span><span class="n">FOOT</span><span class="p">)</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>
<p>Respuesta</p>
<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"human"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Luke Skywalker"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"height"</span><span class="p">:</span><span class="w"> </span><span class="mf">5.6430448</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>
<p>Los argumentos puede ser de muchos tipos distintos. En el ejemplo anterior nosotros usamos un tipo <code class="highlighter-rouge">Enumeration</code> el cual representa un numero finito de opciones (En este caso, unidades de distancia <code class="highlighter-rouge">METER</code> o <code class="highlighter-rouge">FOOT</code>).</p>

<p><a href="https://joelibaceta.github.io/graphql-guide-spanish/aprender/schemas-and-types">Leer mas sobre el esquemas y tipos en GraphQL aqui</a></p>

<h2 id="alias">Alias</h2>

<p>Si tienes una vista aguda, puedes haber notado que los campos del objeto resultado coinciden con el nombre del campo en la consulta pero no incluyen argumentos, por lo que no puedes consultar directamente el mismo campo con diferentes argumentos. Es por este motivo que se necesitan alias - Estos te permiten renombrar un campo del resultado.</p>

<div class="language-graphql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="n">empireHero</span><span class="p">:</span><span class="w"> </span><span class="n">hero</span><span class="p">(</span><span class="n">episode</span><span class="p">:</span><span class="w"> </span><span class="n">EMPIRE</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="n">name</span><span class="w">
  </span><span class="p">}</span><span class="w">
  </span><span class="n">jediHero</span><span class="p">:</span><span class="w"> </span><span class="n">hero</span><span class="p">(</span><span class="n">episode</span><span class="p">:</span><span class="w"> </span><span class="n">JEDI</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="n">name</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>
<p>Resultado</p>
<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"empireHero"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Luke Skywalker"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"jediHero"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"R2-D2"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>
<p>En el ejemplo anterior, los dos campos <code class="highlighter-rouge">hero</code> podrian tener conflictos, pero como podemos asignar diferentes nombres (alias) y obtenemos ambos resultados en una misma solciitud.</p>

<h2 id="fragmentos">Fragmentos</h2>

<p>Digamos que tenemos una pagina relativamente completa en tu aplicacion, la cual nos permite ver a los dos heroes lado a lado junto con sus amigos, puedes imaginar que una consulta de este tipo podria complicarse rapidamente, por que tendriamos que repetir los campos al menos una vez, uno para cada lado de la comparación.</p>

<p>Es por eso que GraphQL incluye unidades reutilizables llamadas fragmentos. Los fragmentos permiten construir conjuntos de campos y luego incluirlos en las consultas donde sea necesario. Aquí hay un ejemplo de cómo podría resolver la situación anterior utilizando fragmentos:</p>

<div class="language-graphql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="n">leftComparison</span><span class="p">:</span><span class="w"> </span><span class="n">hero</span><span class="p">(</span><span class="n">episode</span><span class="p">:</span><span class="w"> </span><span class="n">EMPIRE</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="p">...</span><span class="n">comparisonFields</span><span class="w">
  </span><span class="p">}</span><span class="w">
  </span><span class="n">rightComparison</span><span class="p">:</span><span class="w"> </span><span class="n">hero</span><span class="p">(</span><span class="n">episode</span><span class="p">:</span><span class="w"> </span><span class="n">JEDI</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="p">...</span><span class="n">comparisonFields</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span><span class="k">fragment</span><span class="w"> </span><span class="n">comparisonFields</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="n">Character</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="n">name</span><span class="w">
  </span><span class="n">appearsIn</span><span class="w">
  </span><span class="n">friends</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="n">name</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>
<p>Resultado</p>
<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"leftComparison"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Luke Skywalker"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"appearsIn"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="s2">"NEWHOPE"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"EMPIRE"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"JEDI"</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="s2">"friends"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Han Solo"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Leia Organa"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"C-3PO"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"R2-D2"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">]</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"rightComparison"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"R2-D2"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"appearsIn"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="s2">"NEWHOPE"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"EMPIRE"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"JEDI"</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="s2">"friends"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Luke Skywalker"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Han Solo"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Leia Organa"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>
<p>Puedes ver como la consulta anterior podria ser bastante reptitiva si los campos fuesen repetidos. El concepto de fragmentos es frecuentemente usado para separar requerimeintos de datos de aplicaciones complejas, en partes mas pequeñas, especialmente cuando necesita combinar muchos componentes de la interfaz de usuario con diferentes fragmentos en una consulta de datos.</p>

<h3 id="usando-variables-en-los-fragmentos">Usando variables en los fragmentos</h3>

<p>Es posible que los fragmentos accedan a variables declaradas en la consulta o mutación. <a href="https://joelibaceta.github.io/graphql-guide-spanish/aprender/queries-and-mutations">Ver variables.</a></p>

<div class="language-graphql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">query</span><span class="w"> </span><span class="n">HeroComparison</span><span class="p">(</span><span class="nv">$first</span><span class="p">:</span><span class="w"> </span><span class="nb">Int</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="mi">3</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="n">leftComparison</span><span class="p">:</span><span class="w"> </span><span class="n">hero</span><span class="p">(</span><span class="n">episode</span><span class="p">:</span><span class="w"> </span><span class="n">EMPIRE</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="p">...</span><span class="n">comparisonFields</span><span class="w">
  </span><span class="p">}</span><span class="w">
  </span><span class="n">rightComparison</span><span class="p">:</span><span class="w"> </span><span class="n">hero</span><span class="p">(</span><span class="n">episode</span><span class="p">:</span><span class="w"> </span><span class="n">JEDI</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="p">...</span><span class="n">comparisonFields</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span><span class="k">fragment</span><span class="w"> </span><span class="n">comparisonFields</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="n">Character</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="n">name</span><span class="w">
  </span><span class="n">friendsConnection</span><span class="p">(</span><span class="n">first</span><span class="p">:</span><span class="w"> </span><span class="nv">$first</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="n">totalCount</span><span class="w">
    </span><span class="n">edges</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="n">node</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="n">name</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>
<p>Resultado</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{
  "data": {
    "leftComparison": {
      "name": "Luke Skywalker",
      "friendsConnection": {
        "totalCount": 4,
        "edges": [
          {
            "node": {
              "name": "Han Solo"
            }
          },
          {
            "node": {
              "name": "Leia Organa"
            }
          },
          {
            "node": {
              "name": "C-3PO"
            }
          }
        ]
      }
    },
    "rightComparison": {
      "name": "R2-D2",
      "friendsConnection": {
        "totalCount": 3,
        "edges": [
          {
            "node": {
              "name": "Luke Skywalker"
            }
          },
          {
            "node": {
              "name": "Han Solo"
            }
          },
          {
            "node": {
              "name": "Leia Organa"
            }
          }
        ]
      }
    }
  }
}
</code></pre></div></div>
<h2 id="nombre-de-operacion">Nombre de Operacion</h2>

<p>Hasta ahora, hemos estado usando una sintaxis abreviada donde omitimos la palabra clave <code class="highlighter-rouge">query</code> y el nombre de la consulta, pero en aplicaciones de producción es útil usarlas para hacer que nuestro código sea menos ambiguo.</p>

<p>Aquí hay un ejemplo que incluye la palabra clave <code class="highlighter-rouge">query</code> como <em>tipo de operación</em> y <code class="highlighter-rouge">HeroNameAndFriends</code> como nombre de operación:</p>

<div class="language-graphql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">query</span><span class="w"> </span><span class="n">HeroNameAndFriends</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="n">hero</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="n">name</span><span class="w">
    </span><span class="n">friends</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="n">name</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>
<p>Resultado</p>
<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"hero"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"R2-D2"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"friends"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Luke Skywalker"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Han Solo"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Leia Organa"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>
<p>El <em>tipo de operación</em> es cualquier consulta, mutación o suscripción y describe qué tipo de operación pretende realizar. El tipo de operación es obligatorio a menos que esté usando la sintaxis abreviada de la consulta, en cuyo caso no puede proporcionar un nombre o definicion de variables.</p>

<p>El nombre de la operación es un nombre significativo y explícito para la operación. Solo se requiere en documentos de operaciones múltiples, pero se recomienda su uso porque es muy útil para la depuración y el registro del lado del servidor. Cuando algo sale mal, es más fácil identificar una consulta en su código, registros de red o en su servidor GraphQL por nombre en lugar de intentar descifrar el contenido. Piense en esto como el nombre de una función en su lenguaje de programación favorito. Por ejemplo, en JavaScript podemos trabajar fácilmente solo con funciones anónimas, pero cuando asignamos un nombre a una función, es más fácil rastrearlo, depurar nuestro código y registrar cuando se llama. De la misma manera, los nombres de consulta y mutación de GraphQL, junto con los nombres de los fragmentos, pueden ser una herramienta útil de depuración en el lado del servidor para identificar diferentes solicitudes de GraphQL.</p>

<h2 id="variables">Variables</h2>

<p>Hasta ahora, hemos estado escribiendo todos nuestros argumentos dentro de la consulta. Pero en la mayoría de las aplicaciones, los argumentos de los campos serán dinámicos: por ejemplo, podría haber un menú desplegable que te permita seleccionar el episodio de Star Wars en el que estás interesado, un campo de búsqueda o un conjunto de filtros.</p>

<p>No sería una buena idea pasar estos argumentos dinámicos directamente en la consulta, porque entonces nuestro código del lado del cliente necesitaría manipular dinámicamente la  consulta en tiempo de ejecución y serializarla en un formato específico de GraphQL. En su lugar, GraphQL tiene una forma de <em>primera clase</em> para factorizar los valores dinámicos de la consulta y pasarlos como un diccionario separado. Estos valores se denominan variables.</p>

<p>Cuando comenzamos a trabajar con variables, necesitamos hacer tres cosas:</p>

<ol>
  <li>Reemplace el valor estático en la consulta con $nombreDeVariable</li>
  <li>Declare $nombreDeVariable como una de las variables aceptadas por la consulta</li>
  <li>Pasar <code class="highlighter-rouge">nombreDeVariable: valor</code> en el diccionario de variables separado, especifico del transporte (Normalmente JSON)</li>
</ol>

<p>Asi se veria todo junto:</p>
<div class="language-graphql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">query</span><span class="w"> </span><span class="n">HeroNameAndFriends</span><span class="p">(</span><span class="nv">$episode</span><span class="p">:</span><span class="w"> </span><span class="n">Episode</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="n">hero</span><span class="p">(</span><span class="n">episode</span><span class="p">:</span><span class="w"> </span><span class="nv">$episode</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="n">name</span><span class="w">
    </span><span class="n">friends</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="n">name</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>
<p>Variables</p>
<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"episode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"JEDI"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>
<p>Resultado</p>
<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"hero"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"R2-D2"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"friends"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Luke Skywalker"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Han Solo"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Leia Organa"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>
<p>Ahora, en nuestro código del cliente, podemos pasar una variable diferente en lugar de tener que construir una consulta completamente nueva. En general, esta es también una buena práctica para denotar qué argumentos de nuestra consulta se espera que sean dinámicos: nunca deberíamos hacer interpolación de cadenas para construir consultas a partir de valores proporcionados por el usuario.</p>

<h3 id="variable-definitions">Variable definitions</h3>

<p>La definicion de variables es la parte que se ve como <code class="highlighter-rouge">($episode: Episode)</code> en la consulta anterior. Funciona igual que las definiciones de argumentos para una función en un lenguaje escrito. Enumera todas las variables, prefijadas por el simbolo <code class="highlighter-rouge">$</code>, seguidas por su tipo, en este caso <code class="highlighter-rouge">Episode</code>.</p>

<p>Todas las variables declaradas deben ser escalares, enumeraciones o tipos de objetos de entrada. Entonces, si quiere pasar un objeto complejo a un campo, necesita saber qué tipo de entrada coincide con el servidor. Obtenga más información sobre los tipos de objetos de entrada en la página Esquema.</p>

<p>La definicion de variables puede ser opcional o requerido. En el caso anterior, ya que no hay un <code class="highlighter-rouge">!</code> Junto al tipo Episodio, es opcional. Pero si el campo al que le está pasando la variable requiere un argumento no nulo, la variable también debe ser requerida.</p>

<p>Para obtener más información sobre la sintaxis de estas definiciones de variables, es útil aprender el lenguaje del esquema GraphQL. El lenguaje del esquema se explica en detalle en la página Esquema.</p>

<h3 id="variables-por-defecto">Variables por defecto</h3>

<p>Tambien se pueden asignar valores predeterminados a las variables en la consulta agregando el valor después de la declaración de tipo.</p>

<div class="language-graphql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">query</span><span class="w"> </span><span class="n">HeroNameAndFriends</span><span class="p">(</span><span class="nv">$episode</span><span class="p">:</span><span class="w"> </span><span class="n">Episode</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="n">JEDI</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="n">hero</span><span class="p">(</span><span class="n">episode</span><span class="p">:</span><span class="w"> </span><span class="nv">$episode</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="n">name</span><span class="w">
    </span><span class="n">friends</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="n">name</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p>Cuando se asignan valores predeterminados para todas las variables, se puede llamar a la consulta sin pasar ninguna variable. Si se pasa alguna variable como parte del diccionario de variables, estas sobrescribiran los valores predeterminados.</p>

<h2 id="directivas">Directivas</h2>

<p>Discutimos anteriormente cómo las variables nos permiten evitar la interpolación de cadenas de forma manual para construir consultas dinámicas. Pasar variables en argumentos resuelve una buena cantidad de problemas, pero también es posible que necesitemos una forma de cambiar dinámicamente la estructura y la forma de nuestras consultas utilizando variables. Por ejemplo, podemos imaginar un componente UI que tiene una vista resumida y detallada, donde una incluye más campos que el otro.</p>

<p>Construyamos una consulta para este componente:</p>

<div class="language-graphql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">query</span><span class="w"> </span><span class="n">Hero</span><span class="p">(</span><span class="nv">$episode</span><span class="p">:</span><span class="w"> </span><span class="n">Episode</span><span class="p">,</span><span class="w"> </span><span class="nv">$withFriends</span><span class="p">:</span><span class="w"> </span><span class="nb">Boolean</span><span class="p">!)</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="n">hero</span><span class="p">(</span><span class="n">episode</span><span class="p">:</span><span class="w"> </span><span class="nv">$episode</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="n">name</span><span class="w">
    </span><span class="n">friends</span><span class="w"> </span><span class="k">@include</span><span class="p">(</span><span class="n">if</span><span class="p">:</span><span class="w"> </span><span class="nv">$withFriends</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="n">name</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>
<p>Variables</p>
<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"episode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"JEDI"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"withFriends"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>
<p>Resultado</p>
<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"hero"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"R2-D2"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>
<p>Pasando <code class="highlighter-rouge">true</code> para la variable <code class="highlighter-rouge">withFriends</code></p>
<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"episode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"JEDI"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"withFriends"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>
<p>Resultado</p>
<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"hero"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"R2-D2"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"friends"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Luke Skywalker"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Han Solo"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Leia Organa"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>
<p>Necesitábamos usar una nueva característica en GraphQL llamada directiva. Una directiva puede ser adjuntada a un campo o fragmento y puede afectar la ejecución de la consulta de la forma que el servidor desee. La especificación básica de GraphQL incluye exactamente dos directivas, que deben ser compatibles con cualquier implementación de servidor GraphQL:</p>

<ul>
  <li><code class="highlighter-rouge">@include(if: Boolean)</code> Solo incluya este campo en el resultado si el argumento es <code class="highlighter-rouge">true</code>.</li>
  <li><code class="highlighter-rouge">@skip(if: Boolean)</code> Omita este campo si el argumento es <code class="highlighter-rouge">true</code>.</li>
</ul>

<p>Las directivas pueden ser útiles para salir de situaciones en las que de otro modo necesitaría realizar manipular las cadenas para agregar y eliminar campos en su consulta. Las implementaciones de servidor también pueden agregar características experimentales al definir directivas completamente nuevas.</p>

<h2 id="mutaciones">Mutaciones</h2>

<p>La mayoría de las discusiones sobre GraphQL se centran en la obtención de datos, pero cualquier plataforma de datos completa también necesita una forma de modificar los datos del lado del servidor.</p>

<p>En REST, cualquier solicitud puede terminar causando algunos efectos secundarios de lado del servidor, pero por convención se sugiere que no se utilicen las solicitudes GET para modificar los datos. GraphQL es similar: técnicamente cualquier consulta podría implementarse para provocar una escritura de datos. Sin embargo, es útil establecer una convención de que todas las operaciones que causan escrituras deben enviarse explícitamente a través de una mutación.</p>

<p>Al igual que en las consultas, si el campo de mutación devuelve un tipo objeto, puede consultar por campos anidados. Esto puede ser útil para obtener el nuevo estado de un objeto después de una actualización. Veamos un ejemplo simple de mutación:</p>

<div class="language-graphql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">mutation</span><span class="w"> </span><span class="n">CreateReviewForEpisode</span><span class="p">(</span><span class="nv">$ep</span><span class="p">:</span><span class="w"> </span><span class="n">Episode</span><span class="p">!,</span><span class="w"> </span><span class="nv">$review</span><span class="p">:</span><span class="w"> </span><span class="n">ReviewInput</span><span class="p">!)</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="n">createReview</span><span class="p">(</span><span class="n">episode</span><span class="p">:</span><span class="w"> </span><span class="nv">$ep</span><span class="p">,</span><span class="w"> </span><span class="n">review</span><span class="p">:</span><span class="w"> </span><span class="nv">$review</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="n">stars</span><span class="w">
    </span><span class="n">commentary</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>
<p>Variables</p>
<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"ep"</span><span class="p">:</span><span class="w"> </span><span class="s2">"JEDI"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"review"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"stars"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w">
    </span><span class="s2">"commentary"</span><span class="p">:</span><span class="w"> </span><span class="s2">"This is a great movie!"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>
<p>Resultado</p>
<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"createReview"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"stars"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w">
      </span><span class="s2">"commentary"</span><span class="p">:</span><span class="w"> </span><span class="s2">"This is a great movie!"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>
<p>Observe cómo el campo <code class="highlighter-rouge">createReview</code> devuelve las estrellas (<code class="highlighter-rouge">stars</code>) y los comentarios (<code class="highlighter-rouge">commentary</code>) de la revisión (<code class="highlighter-rouge">review</code>) recién creada. Esto es especialmente útil al mutar datos existentes, por ejemplo, al incrementar un campo, ya que podemos mutar y consultar el nuevo valor del campo con una sola solicitud.</p>

<p>También puede notar que, en este ejemplo, la variable <code class="highlighter-rouge">review</code> que pasamos no es un escalar. Es un tipo de objeto de entrada, un tipo especial de objeto que se puede pasar como un argumento. Obtenga más información sobre los tipos de entrada en la página Esquema.</p>

<h3 id="múltiples-campos-en-las-mutaciones">Múltiples campos en las mutaciones</h3>

<p>Una mutación puede contener varios campos, al igual que una consulta. Hay una diferencia importante entre consultas y mutaciones, aparte del nombre:</p>

<p><strong>Mientras que los campos de consulta se ejecutan en paralelo, los campos de mutación se ejecutan en serie, uno tras otro.</strong></p>

<p>Esto significa que si enviamos dos mutaciones <code class="highlighter-rouge">incrementCredits</code> en una solicitud, se garantiza que la primera finalice antes de que comience la segunda, asegurando que no terminemos con una de carrera entre ellas.</p>

<h2 id="fragmentos-en-linea">Fragmentos en linea</h2>

<p>Al igual que muchos otros sistemas de tipos, los esquemas GraphQL incluyen la capacidad de definir interfaces y tipos de unión. <a href="https://joelibaceta.github.io/graphql-guide-spanish/aprender/schemas-and-types">Aprende sobre ellos en la guía de esquemas.</a></p>

<p>Si está consultando un campo que devuelve una interfaz o un tipo de unión, deberá utilizar un <em>fragmento en línea</em> para acceder a los datos en el tipo concreto subyacente. Es más fácil de ver con un ejemplo:</p>

<div class="language-graphql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">query</span><span class="w"> </span><span class="n">HeroForEpisode</span><span class="p">(</span><span class="nv">$ep</span><span class="p">:</span><span class="w"> </span><span class="n">Episode</span><span class="p">!)</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="n">hero</span><span class="p">(</span><span class="n">episode</span><span class="p">:</span><span class="w"> </span><span class="nv">$ep</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="n">name</span><span class="w">
    </span><span class="p">...</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="n">Droid</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="n">primaryFunction</span><span class="w">
    </span><span class="p">}</span><span class="w">
    </span><span class="p">...</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="n">Human</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="n">height</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>
<p>Variables</p>
<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"ep"</span><span class="p">:</span><span class="w"> </span><span class="s2">"JEDI"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>
<p>Resultado</p>
<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"hero"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"R2-D2"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"primaryFunction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Astromech"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>
<p>En esta consulta, el campo <code class="highlighter-rouge">hero</code> devuelve el tipo de <code class="highlighter-rouge">Character</code>, que puede ser un humano (<code class="highlighter-rouge">Human</code>) o un androide (<code class="highlighter-rouge">Droid</code>) según el argumento <code class="highlighter-rouge">episodio</code>. En la selección directa, solo puede solicitar campos que existen en la interfaz <code class="highlighter-rouge">Character</code>, como el nombre (<code class="highlighter-rouge">name</code>).</p>

<p>Para solicitar un campo en el tipo concreto, debe utilizar un <em>fragmento en línea</em> con una condición de tipo. Debido a que el primer fragmento está etiquetado como <code class="highlighter-rouge">... on Droid</code>, el campo <code class="highlighter-rouge">primaryFunction</code> solo se ejecutará si el Personaje (<code class="highlighter-rouge">Character</code>) devuelto por el héroe (<code class="highlighter-rouge">hero</code>) es del tipo androide (<code class="highlighter-rouge">Droid</code>). Del mismo modo para el campo de <code class="highlighter-rouge">height</code> para el tipo <code class="highlighter-rouge">Human</code>.</p>

<p>Los fragmentos con nombre también se pueden usar de la misma manera, ya que un fragmento con nombre siempre tiene un tipo adjunto.</p>

<h3 id="meta-campos">Meta campos</h3>

<p>Dado que hay algunas situaciones en las que no sabe qué tipo se recibirá del servicio GraphQL, se necesita alguna forma de determinar cómo manejar esos datos en el cliente. GraphQL le permite solicitar el campo <code class="highlighter-rouge">__typename</code>, un meta campo, en cualquier punto de una consulta para obtener el nombre del tipo del objeto en ese punto.</p>

<div class="language-graphql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="n">search</span><span class="p">(</span><span class="n">text</span><span class="p">:</span><span class="w"> </span><span class="s2">"an"</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="n">__typename</span><span class="w">
    </span><span class="p">...</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="n">Human</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="n">name</span><span class="w">
    </span><span class="p">}</span><span class="w">
    </span><span class="p">...</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="n">Droid</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="n">name</span><span class="w">
    </span><span class="p">}</span><span class="w">
    </span><span class="p">...</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="n">Starship</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="n">name</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>
<p>Resultado</p>
<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"search"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">"__typename"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Human"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Han Solo"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">"__typename"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Human"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Leia Organa"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">"__typename"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Starship"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"TIE Advanced x1"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p>En la consulta anterior, la búsqueda devuelve un tipo de unión que puede ser una de las tres opciones. Sería imposible distinguir los diferentes tipos del cliente sin el campo <code class="highlighter-rouge">__typename</code>.</p>

<p>Los servicios GraphQL proporcionan algunos campos de metadatos, el resto de los cuales se utilizan para exponer el <a href="https://joelibaceta.github.io/graphql-guide-spanish/aprender/introspeccion">sistema de introspección</a>.</p>

<p><br /></p>

<blockquote>
  <p><a href="https://joelibaceta.github.io/graphql-guide-spanish/aprender/schemas-and-types">Seguir leyendo -&gt; Esquemas y Tipos </a></p>
</blockquote>

  </div><a class="u-url" href="/graphql-guide-spanish/aprender/queries-and-mutations" hidden></a>
</article>

      </div>
      <aside class="sidebar"><nav> 
 
    
        
        
        
        
        
        
        
        
        
        
        
        

    

         
        
        <h3>  Aprender </h3>

        <ul class="sidebar-list">
        
            <li> 
                <a class="sidebar-item" href="/graphql-guide-spanish/aprender/introduction">
                    Introducción a GraphQL
                </a> 
            </li>
            <li> 
                <a class="sidebar-item" href="/graphql-guide-spanish/aprender/queries-and-mutations">
                    Consultas y Mutaciones
                </a> 
            </li>
            <li> 
                <a class="sidebar-item" href="/graphql-guide-spanish/aprender/schemas-and-types">
                    Esquemas y Tipos
                </a> 
            </li>
            <li> 
                <a class="sidebar-item" href="/graphql-guide-spanish/aprender/validation">
                    Validación
                </a> 
            </li>
            <li> 
                <a class="sidebar-item" href="/graphql-guide-spanish/aprender/execution">
                    Ejecución
                </a> 
            </li>
            <li> 
                <a class="sidebar-item" href="/graphql-guide-spanish/aprender/introspeccion">
                    Introspección
                </a> 
            </li></ul>

         
        
        <h3>  Buenas Prácticas </h3>

        <ul class="sidebar-list">
        
            <li> 
                <a class="sidebar-item" href="/graphql-guide-spanish/buenas%20pr%C3%A1cticas/introduction">
                    Introducción
                </a> 
            </li>
            <li> 
                <a class="sidebar-item" href="/graphql-guide-spanish/buenas%20pr%C3%A1cticas/thinking-in-graphs">
                    Pensando en Grafos
                </a> 
            </li>
            <li> 
                <a class="sidebar-item" href="/graphql-guide-spanish/buenas%20pr%C3%A1cticas/serving-over-http">
                    Sirviendo sobre HTTP
                </a> 
            </li>
            <li> 
                <a class="sidebar-item" href="/graphql-guide-spanish/buenas%20pr%C3%A1cticas/authorization">
                    Seguridad y Autorización
                </a> 
            </li>
            <li> 
                <a class="sidebar-item" href="/graphql-guide-spanish/buenas%20pr%C3%A1cticas/pagination">
                    Paginado
                </a> 
            </li>
            <li> 
                <a class="sidebar-item" href="/graphql-guide-spanish/buenas%20pr%C3%A1cticas/caching">
                    Cache
                </a> 
            </li></ul></nav></aside>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/graphql-guide-spanish/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">GraphQL</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">GraphQL</li><li><a class="u-email" href="mailto:your-email@example.com">your-email@example.com</a></li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="https://github.com/jekyll"><svg class="svg-icon"><use xlink:href="/graphql-guide-spanish/assets/minima-social-icons.svg#github"></use></svg> <span class="username">jekyll</span></a></li><li><a href="https://twitter.com/jekyllrb"><svg class="svg-icon"><use xlink:href="/graphql-guide-spanish/assets/minima-social-icons.svg#twitter"></use></svg> <span class="username">jekyllrb</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3">
        <p>Write an awesome description for your new site here. You can edit this line in _config.yml. It will appear in your document head meta (for Google search results) and in your feed.xml site description.</p>
      </div>
    </div>

  </div>

</footer>
</body>

</html>
